<div class="px-4 py-6 sm:px-0">
  <!-- Page Header -->
  <div class="pb-5 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <%= link_to admin_wishlists_path, class: "text-gray-500 hover:text-gray-700" do %>
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        <% end %>
        <div>
          <h1 class="text-3xl font-bold leading-6 text-gray-900"><%= @wishlist.name %></h1>
          <p class="mt-1 text-sm text-gray-500">
            By <%= link_to @wishlist.user.name, admin_user_path(@wishlist.user), class: "text-rose-600 hover:text-rose-900" %>
            • Created <%= @wishlist.created_at.strftime("%B %d, %Y") %>
          </p>
        </div>
      </div>
      <div class="flex items-center space-x-3">
        <span class="inline-flex px-3 py-1 text-sm font-semibold rounded-full 
                     <%= case @wishlist.visibility
                         when 'private_list' then 'bg-gray-100 text-gray-800'
                         when 'partner_only' then 'bg-purple-100 text-purple-800'
                         when 'publicly_visible' then 'bg-green-100 text-green-800'
                         else 'bg-gray-100 text-gray-800'
                         end %>">
          <%= @wishlist.visibility.humanize %>
        </span>
        <% if @wishlist.is_default %>
          <span class="inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800">
            Default
          </span>
        <% end %>
        <% if current_user.super_admin? %>
          <%= link_to admin_wishlist_path(@wishlist), method: :delete, 
                      confirm: "Are you sure you want to delete this wishlist and all its items?",
                      class: "inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700" do %>
            Delete Wishlist
          <% end %>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Wishlist Details -->
  <div class="mt-6 bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
      <h3 class="text-lg leading-6 font-medium text-gray-900">Wishlist Details</h3>
    </div>
    <dl class="divide-y divide-gray-200">
      <% if @wishlist.description.present? %>
        <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
          <dt class="text-sm font-medium text-gray-500">Description</dt>
          <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
            <%= @wishlist.description %>
          </dd>
        </div>
      <% end %>
      
      <% if @wishlist.event_type != 'general_wishlist' %>
        <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
          <dt class="text-sm font-medium text-gray-500">Event Type</dt>
          <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
            <%= @wishlist.event_type.humanize %>
          </dd>
        </div>
        
        <% if @wishlist.event_date %>
          <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">Event Date</dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= @wishlist.event_date.strftime("%B %d, %Y") %>
              <% if @wishlist.event_date.future? %>
                <span class="text-green-600">(in <%= time_ago_in_words(@wishlist.event_date) %>)</span>
              <% elsif @wishlist.event_date.past? %>
                <span class="text-gray-500">(was <%= time_ago_in_words(@wishlist.event_date) %> ago)</span>
              <% else %>
                <span class="text-blue-600">(today)</span>
              <% end %>
            </dd>
          </div>
        <% end %>
      <% end %>
      
      <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-500">Total Items</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= @items.count %>
          <% if @items.purchased.any? %>
            • <%= @items.purchased.count %> purchased
            • <%= @items.available.count %> available
          <% end %>
        </dd>
      </div>
      
      <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-500">Created</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= @wishlist.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          (<%= time_ago_in_words(@wishlist.created_at) %> ago)
        </dd>
      </div>
      
      <div class="px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-500">Last Updated</dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= @wishlist.updated_at.strftime("%B %d, %Y at %I:%M %p") %>
          (<%= time_ago_in_words(@wishlist.updated_at) %> ago)
        </dd>
      </div>
    </dl>
  </div>

  <!-- Wishlist Items -->
  <div class="mt-8 bg-white shadow rounded-lg">
    <div class="px-4 py-5 sm:px-6 border-b border-gray-200">
      <h3 class="text-lg leading-6 font-medium text-gray-900">
        Wishlist Items (<%= @items.count %>)
      </h3>
    </div>
    
    <% if @items.any? %>
      <div class="divide-y divide-gray-200">
        <% @items.each do |item| %>
          <div class="px-4 py-6 sm:px-6">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-start space-x-4">
                  <% if item.image_url.present? %>
                    <div class="flex-shrink-0">
                      <img class="h-16 w-16 object-cover rounded-lg" src="<%= item.image_url %>" alt="<%= item.name %>">
                    </div>
                  <% else %>
                    <div class="flex-shrink-0 h-16 w-16 bg-gray-200 rounded-lg flex items-center justify-center">
                      <svg class="h-8 w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                      </svg>
                    </div>
                  <% end %>
                  
                  <div class="flex-1">
                    <h4 class="text-lg font-medium text-gray-900">
                      <%= item.name %>
                      <% if item.purchased? %>
                        <span class="ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                          Purchased
                        </span>
                      <% end %>
                    </h4>
                    
                    <% if item.description.present? %>
                      <p class="mt-1 text-sm text-gray-600"><%= item.description %></p>
                    <% end %>
                    
                    <div class="mt-2 flex items-center space-x-4 text-sm text-gray-500">
                      <% if item.price.present? %>
                        <span class="font-medium text-gray-900">
                          <%= number_to_currency(item.price) %>
                        </span>
                      <% end %>
                      
                      <% if item.priority.present? %>
                        <span class="inline-flex px-2 py-1 text-xs rounded-full
                                   <%= case item.priority
                                       when 'high' then 'bg-red-100 text-red-800'
                                       when 'medium' then 'bg-yellow-100 text-yellow-800'
                                       when 'low' then 'bg-green-100 text-green-800'
                                       else 'bg-gray-100 text-gray-800'
                                       end %>">
                          <%= item.priority.humanize %> priority
                        </span>
                      <% end %>
                      
                      <span>Added <%= time_ago_in_words(item.created_at) %> ago</span>
                      
                      <% if item.purchased_by %>
                        <span>
                          Purchased by 
                          <%= link_to item.purchased_by.name, admin_user_path(item.purchased_by), 
                                      class: "text-rose-600 hover:text-rose-900" %>
                        </span>
                      <% end %>
                    </div>
                    
                    <% if item.safe_url.present? %>
                      <div class="mt-2">
                        <%= link_to item.safe_url, target: "_blank", rel: "noopener noreferrer",
                                    class: "text-sm text-rose-600 hover:text-rose-900" do %>
                          View Product →
                        <% end %>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-12">
        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
        </svg>
        <h3 class="mt-2 text-sm font-medium text-gray-900">No items yet</h3>
        <p class="mt-1 text-sm text-gray-500">
          This wishlist doesn't have any items yet.
        </p>
      </div>
    <% end %>
  </div>
</div>